define(["require","exports"],function(a,b){"use strict";var c=function(){function a(){this.sharelinkcontainerselector=".js-sharelinks",this.sharelinkitemselector=".js-sharelink",this.noTouchSelector="no-touchevents",this.facebookitemselector="sharelinks-fb",this.facebookGraphUrl="https://graph.facebook.com",this.$links=null,this.$sharelinkcontainer=null,this.pageurl="",this.bolLoadScripts=!1,this.bolScriptsLoaded=!1,this.scriptLoadWaitingTime=5e3;var a=this;a.$sharelinkcontainer=$(a.sharelinkcontainerselector),a.$links=a.$sharelinkcontainer.find(a.sharelinkitemselector),a.pageurl=a.$sharelinkcontainer.data("pageurl"),a.addEvents()}return a.prototype.addEvents=function(){var a=this;a.$links.on("click keydown",$.proxy(a.onShareLinkClick,a))},a.prototype.onShareLinkClick=function(a){if("click"===a.type||"keydown"===a.type&&(0===a.keyCode||13===a.keyCode)){var b=$(a.currentTarget);if($("html").hasClass(this.noTouchSelector)&&"_blank"===b.attr("target")&&(a.preventDefault(),window.open(b.attr("href"),"ShareLinks","width=400,height=200")),b.hasClass(this.facebookitemselector)){var c=b.attr("href").toString();a.preventDefault(),this.scrapAndReloadFacebookShare(c)}}},a.prototype.scrapAndReloadFacebookShare=function(a){if(document.addEventListener&&document.querySelector){var b=new XMLHttpRequest;b.open("POST",this.facebookGraphUrl,!0),b.onreadystatechange=function(){4===b.readyState&&window.open(a,"popup","width=600,height=600")};var c=window.location.href,d=document.querySelector("meta[property='og:url']");if(null!==d&&"undefined"!=typeof d){var e=d.getAttribute("content");""!==e&&(c=e)}b.send("scrape=true&id="+encodeURIComponent(c))}return!1},a}(),d=new c;return d});